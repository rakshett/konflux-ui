import { RouteErrorBoundry } from '@routes/RouteErrorBoundary';
import {
  ComponentDetailsTab,
  ComponentDetailsViewLayout,
  componentDetailsViewLoader,
} from '../../components/ComponentsPage/ComponentDetails';
import ActivityTabV2 from '../../shared/components/activity-tab/ActivityTabV2';
import { COMPONENT_DETAILS_V2_PATH, COMPONENTS_PATH } from '../paths';
import { RouterParams } from '../utils';

const componentsPageRoutes = [
  {
    path: COMPONENTS_PATH.path,
    lazy: async () => {
      const { default: Component } = await import('~/components/ComponentsPage/ComponentsPage');
      return { Component };
    },
    errorElement: <RouteErrorBoundry />,
  },
  {
    path: COMPONENT_DETAILS_V2_PATH.path,
    errorElement: <RouteErrorBoundry />,
    loader: componentDetailsViewLoader,
    element: <ComponentDetailsViewLayout />,
    children: [
      {
        index: true,
        element: <ComponentDetailsTab />,
      },
      {
        path: 'activity',
        element: <ActivityTabV2 />,
      },
      {
        path: `activity/:${RouterParams.activityTab}`,
        element: <ActivityTabV2 />,
      },
      {
        path: 'versions',
        element: null, // TODO: implement Versions tab KFLUXUI-1007
      },
    ],
  },
];

export default componentsPageRoutes;
